var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,e){a!=Array.prototype&&a!=Object.prototype&&(a[c]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
(function(a){function c(b){"string"!==typeof b&&(b=String(b));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(b))throw new TypeError("Invalid character in header field name");return b.toLowerCase()}function e(b){"string"!==typeof b&&(b=String(b));return b}function g(b){var a={next:function(){var a=b.shift();return{done:void 0===a,value:a}}};h.iterable&&(a[Symbol.iterator]=function(){return a});return a}function d(b){this.map={};b instanceof d?b.forEach(function(b,a){this.append(a,b)},this):Array.isArray(b)?
b.forEach(function(b){this.append(b[0],b[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(a){this.append(a,b[a])},this)}function l(b){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}function n(b){return new Promise(function(a,c){b.onload=function(){a(b.result)};b.onerror=function(){c(b.error)}})}function u(b){var a=new FileReader,c=n(a);a.readAsArrayBuffer(b);return c}function v(b){b=new Uint8Array(b);for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(b[c]);
return a.join("")}function r(b){if(b.slice)return b.slice(0);var a=new Uint8Array(b.byteLength);a.set(new Uint8Array(b));return a.buffer}function t(){this.bodyUsed=!1;this._initBody=function(b){if(this._bodyInit=b)if("string"===typeof b)this._bodyText=b;else if(h.blob&&Blob.prototype.isPrototypeOf(b))this._bodyBlob=b;else if(h.formData&&FormData.prototype.isPrototypeOf(b))this._bodyFormData=b;else if(h.searchParams&&URLSearchParams.prototype.isPrototypeOf(b))this._bodyText=b.toString();else if(h.arrayBuffer&&
h.blob&&b&&DataView.prototype.isPrototypeOf(b))this._bodyArrayBuffer=r(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||w(b)))this._bodyArrayBuffer=r(b);else throw Error("unsupported BodyInit type");else this._bodyText="";this.headers.get("content-type")||("string"===typeof b?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&
URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))};h.blob&&(this.blob=function(){var b=l(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?
l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)});this.text=function(){var b=l(this);if(b)return b;if(this._bodyBlob){b=this._bodyBlob;var a=new FileReader,c=n(a);a.readAsText(b);return c}if(this._bodyArrayBuffer)return Promise.resolve(v(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)};h.formData&&(this.formData=function(){return this.text().then(x)});this.json=function(){return this.text().then(JSON.parse)};
return this}function m(b,a){a=a||{};var c=a.body;if(b instanceof m){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url;this.credentials=b.credentials;a.headers||(this.headers=new d(b.headers));this.method=b.method;this.mode=b.mode;c||null==b._bodyInit||(c=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);this.credentials=a.credentials||this.credentials||"omit";if(a.headers||!this.headers)this.headers=new d(a.headers);var q=a.method||this.method||"GET",e=q.toUpperCase();this.method=
-1<y.indexOf(e)?e:q;this.mode=a.mode||this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function x(b){var a=new FormData;b.trim().split("&").forEach(function(b){if(b){var c=b.split("=");b=c.shift().replace(/\+/g," ");c=c.join("=").replace(/\+/g," ");a.append(decodeURIComponent(b),decodeURIComponent(c))}});return a}function z(b){var a=new d;b.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(b){var c=
b.split(":");if(b=c.shift().trim())c=c.join(":").trim(),a.append(b,c)});return a}function k(b,a){a||(a={});this.type="default";this.status=void 0===a.status?200:a.status;this.ok=200<=this.status&&300>this.status;this.statusText="statusText"in a?a.statusText:"OK";this.headers=new d(a.headers);this.url=a.url||"";this._initBody(b)}if(!a.fetch){var A="Symbol"in a&&"iterator"in Symbol,p;if(p="FileReader"in a&&"Blob"in a)try{new Blob,p=!0}catch(b){p=!1}var h={searchParams:"URLSearchParams"in a,iterable:A,
blob:p,formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};if(h.arrayBuffer)var B="[object Int8Array];[object Uint8Array];[object Uint8ClampedArray];[object Int16Array];[object Uint16Array];[object Int32Array];[object Uint32Array];[object Float32Array];[object Float64Array]".split(";"),w=ArrayBuffer.isView||function(b){return b&&-1<B.indexOf(Object.prototype.toString.call(b))};d.prototype.append=function(b,a){b=c(b);a=e(a);var d=this.map[b];this.map[b]=d?d+","+a:a};d.prototype["delete"]=function(a){delete this.map[c(a)]};
d.prototype.get=function(a){a=c(a);return this.has(a)?this.map[a]:null};d.prototype.has=function(a){return this.map.hasOwnProperty(c(a))};d.prototype.set=function(a,d){this.map[c(a)]=e(d)};d.prototype.forEach=function(a,c){for(var b in this.map)this.map.hasOwnProperty(b)&&a.call(c,this.map[b],b,this)};d.prototype.keys=function(){var a=[];this.forEach(function(b,c){a.push(c)});return g(a)};d.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});return g(a)};d.prototype.entries=
function(){var a=[];this.forEach(function(b,c){a.push([c,b])});return g(a)};h.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var y="DELETE GET HEAD OPTIONS POST PUT".split(" ");m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};t.call(m.prototype);t.call(k.prototype);k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})};k.error=function(){var a=new k(null,{status:0,statusText:""});
a.type="error";return a};var C=[301,302,303,307,308];k.redirect=function(a,c){if(-1===C.indexOf(c))throw new RangeError("Invalid status code");return new k(null,{status:c,headers:{location:a}})};a.Headers=d;a.Request=m;a.Response=k;a.fetch=function(a,c){return new Promise(function(b,d){var e=new m(a,c),f=new XMLHttpRequest;f.onload=function(){var a={status:f.status,statusText:f.statusText,headers:z(f.getAllResponseHeaders()||"")};a.url="responseURL"in f?f.responseURL:a.headers.get("X-Request-URL");
b(new k("response"in f?f.response:f.responseText,a))};f.onerror=function(){d(new TypeError("Network request failed"))};f.ontimeout=function(){d(new TypeError("Network request failed"))};f.open(e.method,e.url,!0);"include"===e.credentials?f.withCredentials=!0:"omit"===e.credentials&&(f.withCredentials=!1);"responseType"in f&&h.blob&&(f.responseType="blob");e.headers.forEach(function(a,b){f.setRequestHeader(b,a)});f.send("undefined"===typeof e._bodyInit?null:e._bodyInit)})};a.fetch.polyfill=!0}})("undefined"!==
typeof self?self:this);var emailEl=_("email"),subEl=_("sub"),submitEl=_("submit"),feedback=_("submit-feedback"),reject=function(a){return Promise.reject(a)},toJSON=function(a){return 200!==a.status?a.json().then(reject):a.json()},headers={Accept:"application/json, text/plain, */*","Content-Type":"application/json"},api=function(a){return function(c){return function(e){return fetch("https://api.nan.ci/"+c,{body:JSON.stringify(e),headers:headers,method:a}).then(toJSON)}}},levenshtein=function(a,c){if(0===a.length)return c.length;if(0===
c.length)return a.length;var e;if(a.length>c.length){var g=a;a=c;c=g}var d=Array(a.length+1);for(g=0;g<=a.length;g++)d[g]=g;for(g=1;g<=c.length;g++){var l=g;for(e=1;e<=a.length;e++){var n=c[g-1]===a[e-1]?d[e-1]:Math.min(d[e-1]+1,Math.min(l+1,d[e]+1));d[e-1]=l;l=n}d[a.length]=l}return d[a.length]},whitelist=[],blacklist=new Set;
fetch("/assets/misc/domain-list.txt").then(function(a){return a.text()}).then(function(a){return a.split("#disposable#").map(function(a){return a.split("\n")})}).then(function(a){var c=$jscomp.makeIterator(a);a=c.next().value;c=c.next().value;whitelist=a.filter(Boolean).map(function(a){return{value:a,score:0}});blacklist=new Set(c.filter(Boolean))});
var byScore=function(a,c){return a.score-c.score},findNearestPopularDomain=function(a){if(!a)return{score:0,value:""};whitelist.forEach(function(c){return c.score=levenshtein(a,c.value)});return whitelist.sort(byScore)[0]};api.email=api("POST")("email");var say=function(a){feedback.classList.remove("error");feedback.textContent=a},sayError=function(a){feedback.classList.add("error");feedback.textContent=a},preventSubmit=!1;emailEl.onfocus=function(){return preventSubmit=!1};
var isInputValid=function(a){var c=$jscomp.makeIterator(emailEl.value.split(/(^[^@]+@)(.+)/));c.next();var e=c.next().value;c=c.next().value;if(!c)return sayError("Email invalide");if(blacklist.has(c))return sayError("@"+c+" est bloqu\u00e9");if(a)return!0;a=findNearestPopularDomain(c);return c!==a.value&&5>a.score?say("c'est pas plut\u00f4t "+e+a.value+" ?"):!0};emailEl.onchange=function(){preventSubmit=!0;if(!isInputValid())return emailEl.select();say("");preventSubmit=!1};
submitEl.onclick=function(){if(preventSubmit||submitEl.classList.contains("wait"))return!1;if(!isInputValid(!0))return emailEl.select();say("verification...");submitEl.classList.add("wait");api.email({email:emailEl.value,sub:subEl.checked}).then(function(){return window.location.pathname="/blog"},function(a){sayError(a.message);emailEl.select();submitEl.classList.remove("wait")});return!1};say("");
